{% import "./mhclg.html" as mhclg %}
{% extends "layout.html" %} {% block pageTitle %} Start page example {% endblock
%} {% block header %}
<!-- Blank header with no service name for the start page -->
{{ govukHeader() }} {% endblock %} {% block beforeContent %}
<script src="https://unpkg.com/dayjs@1.8.21/dayjs.min.js"></script>
<script src="https://unpkg.com/dayjs@1.8.21/plugin/customParseFormat.js"></script>

<div class="govuk-breadcrumbs">
  <ol class="govuk-breadcrumbs__list">
    <li class="govuk-breadcrumbs__list-item">
      <a class="govuk-breadcrumbs__link" href="index">Home</a>
    </li>
    <li class="govuk-breadcrumbs__list-item">
      <a class="govuk-breadcrumbs__link" href="/sprint6">Sprint 6</a>
    </li>
    <li class="govuk-breadcrumbs__list-item">
      <a class="govuk-breadcrumbs__link" href="/sprint6/step1">Step 1</a>
    </li>
    <li class="govuk-breadcrumbs__list-item">
      <a class="govuk-breadcrumbs__link" href="/sprint6/step2">Step 2</a>
    </li>
    <li class="govuk-breadcrumbs__list-item">
      <a class="govuk-breadcrumbs__link" href="/sprint6/step3">Step 3</a>
    </li>
    <li class="govuk-breadcrumbs__list-item">
      <a class="govuk-breadcrumbs__link" >Step 4</a>
    </li>
  </ol>
</div>
{% endblock %} {% block content %}
<h1 class="govuk-heading-l">Tenant details</h1>
<form class="form" action="/sprint6/step5" method="POST">
<fieldset
  class="govuk-fieldset"
  role="group"
  aria-describedby="Tenant age and gender"
>

  {# age input #}
  <div class="govuk-date-input__item">
      {{ mhclg.textbox("step4", "", data, "tenant-age", "number") }}
  </div>

  {# gender input #}
  {{ mhclg.option("step4", data, 'tenant-gender') }}

  {# economic status input #}

  <fieldset
    class="govuk-fieldset"
    role="group"
    aria-describedby="Tenant economic status"
  >
    <div class="govuk-date-input__item">
      {{ mhclg.option("step4", data, 'tenant-economic-status') }}
    </div>
  </fieldset>


  {# Ethnicity input #}

  <fieldset
    class="govuk-fieldset"
    role="group"
    aria-describedby="Ethnicity options"
  >
    <div class="govuk-date-input__item">
      {{ mhclg.option("step4", data, 'ethnicity-options') }}
    </div>
  </fieldset>

  {# Nationality input #}

  <fieldset
    class="govuk-fieldset"
    role="group"
    aria-describedby="Nationality options"
  >
    <div class="govuk-date-input__item">
      {{ mhclg.option("step4", data, 'nationality-options') }}
    </div>
  </fieldset>

  {{ mhclg.textbox("step4", "Maximum 7", data, "number-in-household", "number", "check()") }}

  <!-- <div class="govuk-date-input__item">
    <div class="govuk-form-group">
      <h2 class="govuk-label-wrapper">
        <label class="govuk-label govuk-label--m" for="number-in-household">
          How many other people in the household?
        </label>
      </h2>
      <span class="govuk-caption-m">Maximum 7</span>
      <input class="govuk-input" name="number-in-household" id="number-in-household" type="number" value="{{ data['number-in-household'] }}"
        pattern="[0-7]*" inputmode="numeric" onkeyup="check()"
      />
    </div>
  </div> -->
  </fieldset>

  {% for i in [1,2,3,4,5,6,7] %}
  <div id="person-{{i}}">
    <hr class="govuk-!-margin-bottom-6" />
    {# age input #}
    {% set age_group = "tenant-age-person-"+ i %}
    {{ mhclg.textbox("step4", "", data, age_group, "number" )}}

    {# gender input #}
    <div class="govuk-date-input__item">
      {{ mhclg.option("step4", data, 'tenant-gender-person-'+i) }}
    </div>

    {# economic status input #}
    <fieldset
      class="govuk-fieldset"
      role="group"
      aria-describedby="Tenant economic status"
    >
      <div class="govuk-date-input__item">
        {{ mhclg.option("step4", data, 'tenant-economic-status-person-'+i) }}
      </div>
    </fieldset>

    {# relationship input #}
    <div class="govuk-date-input__item">
      {{ mhclg.option("step4", data, 'tenant-relationship-person-'+i) }}
    </div>
  </div>
  {% endfor %}

  <script>
    const reset = () => {
      for(var i = 1; i<=7; i++ ) {
        let test = `person-${i.toString()}`;
        document.getElementById(test).style.display = "none";
      }
    }

    function check() {
      reset();
      var val = document.getElementById("number-in-household").value > 7 ? 7 : document.getElementById("number-in-household").value;

      console.log(val);
      for(var i = 1; i<=val; i++ ) {
        let test = `person-${i.toString()}`;
        document.getElementById(test).style.display = "block";
      }
    }
    check()
  </script>

  <style>
  #person-1 {
    display: none;
  }
  #person-2{
    display: none;
  }
  #person-3{
    display: none;
  }
  #person-4{
    display: none;
  }
  #person-5{
    display: none;
  }
  #person-6{
    display: none;
  }
  #person-7{
    display: none;
  }
  </style>

  <button class="govuk-button" data-module="govuk-button">
    Continue
    <svg
      class="govuk-button__start-icon"
      xmlns="http://www.w3.org/2000/svg"
      width="17.5"
      height="19"
      viewBox="0 0 33 40"
      aria-hidden="true"
      focusable="false"
    >
      <path fill="currentColor" d="M0 0h13l20 20-20 20H0l20-20z" />
    </svg>
  </button>
</form>

{% endblock %}
