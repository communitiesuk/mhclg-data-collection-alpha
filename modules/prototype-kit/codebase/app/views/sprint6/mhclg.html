{% 
  set reason_for_vacancy = {
      "arrears": "Relet - tenant evicted due to arrears",
      "asb": "Relet - tenant evicted due to ASB or other reason",
      "died": "Relet - tenant died (no succession) ",
      "moved-to-social": "Relet - tenant moved to other social housing provider",
      "abandoned": "Relet - tenant abandoned property",
      "moved-to-private": "Relet - tenant moved to private sector or other accommodation",
      "from-temoprary": "Relet - to tenant who occupied same property as temporary accommodation",
      "internal-transfer": "Relet – internal transfer (excluding renewals of a fixed-term tenancy)",
      "renewal": "Relet – renewal of fixed-term tenancy",
      "first-let-new-build": "First let of newbuild property",
      "first-let-conversion": "First let of conversion/rehabilitation/acquired property",
      "first-let-leased": "First let of leased property"
  }
%}

{%
  set unit_type = {
      "flat": "Flat / maisonette",
      "bedsit": "Bed-sit",
      "house": "House",
      "bungalow": "Bungalow",
      "maisonette": "Shared flat / maisonette",
      "shared-house": "Shared house",
      "shared-bungalow": "Shared bungalow",
      "other": "Other"
  }
%}

{%
  set building_type = {
    "purpose-built": "Purpose built",
    "converted": "Converted from previous residential or non-residential property"
  }
%}

{%
  set yes_no = {
    "yes": "Yes",
    "no": "No"
  }
%}

{%
  set yes_no_dk = {
    "yes": "Yes",
    "no": "No",
    "dont-know": "Don't know"
  }
%}

{%
  set yes_no_ref = {
    "yes": "Yes",
    "no": "No",
    "refused": "Refused"
  }
%}

{%
  set relet = {
    "social-rent": "A social rent basis",
    "affordable": "An affordable rent basis",
    "rent-to-buy": "A rent to buy basis",
    "unknown": "Don't know"
  }
%}

{%
  set reasonable_preference = {
    'homeless': 'Homeless or about to lose their home (within 56 days)',
    'insanitary': 'Living in insanitary or overcrowded or unsatisfactory housing',
    'medical': 'A need to move on medical and welfare grounds (including a reasonable-preference-reasons)',
    'hardship': 'A need to move to avoid hardship to themselves or others',
    'unknown': "Don't know"
  }

%}

{%
  set time_range = {
          "0": "Just moved to Local Authority area",
          "<1": "Less than 1 year",
          "<2": "1 year but under 2 years",
          "<3": "2 years but under 3 years",
          "<4": "3 years but under 4 years",
          "<5": "4 years but under 5 years",
          ">5": "5 years or more",
          "?": "Don't Know"
  }
%}

{%
  set rental_period = {
          "fortnight": "Fortnightly",
          "four-weekly": "Four-weekly",
          "monthly": "Calendar monthly",
          "46-weekly": "Weekly for 46 weeks",
          "47-weekly": "Weekly for 47 weeks",
          "48-weekly": "Weekly for 48 weeks",
          "49-weekly": "Weekly for 49 weeks",
          "50-weekly": "Weekly for 50 weeks",
          "51-weekly": "Weekly for 51 weeks",
          "52-weekly": "Weekly for 52 weeks",
          "53-weekly": "Weekly for 53 weeks"
  }
%}

{%
  set homeless = {
    "not-homeless": "Not homeless",
    "threatened-homeless": "Assessed as threatened with homelessness within 56 days by a LA and owed prevention duty",
    "homeless-owed-relief-duty": "Assessed as homeless by a LA and owed a relief duty",
    "unintentionally-homeless": "Assessed as unintentionally homeless and having priority need by a LA and owed a homeless main duty",
    "other-homeless": "Other homelessness i.e. not found statutorily homeless by a housing authority but considered to be homeless by the letting landlord"
  }
%}

{%
  set referral_by = {
          "internal-transfer": "Internal transfer",
          "applied-direct": "Tenant applied direct (no referral or nomination)",
          "la-nominated": "PRP lettings only - nominated by a local housing authority",
          "housing-mobility": "Relocated through recognised national/regional or sub-regional housing mobility scheme",
          "social-landlord": "Other social landlord",
          "social-services": "Social services",
          "police-etc": "Police/probation/prison",
          "youth-offending-team": "Youth offending team",
          "mental-health-team": "Community mental health team",
          "health-service": "Health service",
          "voluntary-agency": "Voluntary agency",
          "other": "Other"
  }  
%}

{%
  set data_lookups = {
   "completion-year": {
      "2021": "2020/2021",
      "2022": "2021/2022"
    },
    "form-name": {
        "social-general": "Social Rent General Needs",
        "social-supported": "Social Rent Supported Housing",
        "affordable-general": "Affordable Rent General Needs",
        "affordable-supported": "Affordable Rent Supported Housing",
        "rtb-general": "Rent To Buy General Needs",
        "rtb-supported": "Rent To Buy Supported Housing",
        "sales-log": "Sales Log"
    },
    "gdpr": yes_no,
    "provider": {
      "private-registered": "Private Registered Provider",
      "local-authority": "Local Authority"
    },
    "ll-status": {
      "this": "This Landlord",
      "another": "Another RP (HA/LA)"
    },
    "tenancy-type": {
      "secure-including-flexible": "Secure including flexible",
      "assured": "Assured",
      "assured-shorthold": "Assured shorthold",
      "license-agreement": "License agreement",
      "other": "Other"
    },
    "starter-tenancy": yes_no
  }
%}

{%
  set gender = {
    "male": "Male",
    "female": "Female",
    "other": "Other",
    "refused": "Refused"
  }
%}

{%
  set economic_status = {
    "part-time": "Part-time (Less than 30 hrs)",      
    "full-time": "Full-time (30 hrs or more) Not seeking work Government training/New deal",
    "student": "Full-time student Jobseeker Child under 16 Retired",
    "unable-to-work": "Unable to work/long term sick or disability",
    "other": "Other adult"
  }
%}

{%
  set ethnicity = {
    "White: British": "White: British",
    "White: Irish": "White: Irish",
    "White: Gypsy/Irish Traveller": "White: Gypsy/Irish Traveller",
    "White: Other": "White: Other",
    "Mixed: White and Black Caribbean": "Mixed: White and Black Caribbean",
    "Mixed: Other": "Mixed: Other",
    "Mixed: White and Asian": "Mixed: White and Asian",
    "Asian or Asian British: Indian": "Asian or Asian British: Indian",
    "Asian or Asian British: Pakistani": "Asian or Asian British: Pakistani",
    "Asian or Asian British: Bangladeshi": "Asian or Asian British: Bangladeshi",
    "Asian or Asian British: Chinese": "Asian or Asian British: Chinese",
    "Asian or Asian British: Other": "Asian or Asian British: Other",
    "Black: Caribbean": "Black: Caribbean",
    "Black: African": "Black: African",
    "Black: Other": "Black: Other",
    "Other: Arab": "Other: Arab"
  }
%}

{%
  set nationality = {
    "UK national resident in UK": "UK national resident in UK",
    "UK national returning from residence overseas": "UK national returning from residence overseas",
    "Czech Republic": "Czech Republic",
    "Estonia": "Estonia",
    "Hungary": "Hungary",
    "Lithuania": "Lithuania",
    "Poland": "Poland",
    "Slovakia": "Slovakia",
    "Slovenia": "Slovenia",
    "Bulgaria": "Bulgaria",
    "Romania": "Romania",
    "Croatia": "Croatia",
    "Ireland": "Ireland",
    "Other EU Economic Area EEA Country": "Other EU Economic Area EEA Country",
    "Any other country": "Any other country"
  }
%}

{%
  set armed_forces = {
          "regular": "Yes - Regular",
          "reserve": "Yes - Reserve",
          "no": "No",
          "refused": "Refused"
  }
%}

{%
  set regular_service = {
    "Up to and including 5 years ago": "Up to and including 5 years ago",
    "More than 5 years ago": "More than 5 years ago",
    "Are still serving": "Are still serving",
    "Refused": "Refused"
  }
%}

{%
  set benefits = {
    "Housing Benefit (If not in receipt of universal credit)": "Housing Benefit (If not in receipt of universal credit)", 
    "Not in receipt of either UC or HB": "Not in receipt of either UC or HB", 
    "Don't know": "Don't know", 
    "UC - With housing element (and not in receipt of housing benefit)": "UC - With housing element (and not in receipt of housing benefit)", 
    "UC - Without housing element (not in receipt of HB and tenants not eligible for housing support e.g residential care home)": "UC - Without housing element (not in receipt of HB and tenants not eligible for housing support e.g residential care home)", 
    "UC - Without housing element (and in receipt of HB)": "UC - Without housing element (and in receipt of HB)"
  }
%}

{%
  set benefit_proportion = {
    "all": "All",
    "some": "Some",
    "none": "None",
    "unknown": "Don't know"
  }
%}

{%
  set regularity = {
    "Weekly": "Weekly",
    "Monthly": "Monthly",
    "Annual": "Annual"
  }
%}

{%
  set reason_for_leaving_previous = {
      "Permanently decanted from another property owned by this landlord": "Permanently decanted from another property owned by this landlord",
      "Left home country as refugee": "Left home country as refugee",
      "Discharged from prison or from long stay hospital or other institution": "Discharged from prison or from long stay hospital or other institution",
      "Loss of tied accommodation": "Loss of tied accommodation",
      "Domestic abuse": "Domestic abuse",
      "(Non-violent) relationship breakdown with partner": "(Non-violent) relationship breakdown with partner",
      "Asked to leave by family or friends": "Asked to leave by family or friends",
      "Racial harassment": "Racial harassment",
      "Other problems with neighbours": "Other problems with neighbours",
      "Property unsuitable because of overcrowding": "Property unsuitable because of overcrowding",
      "End of assured shorthold tenancy – no fault": "End of assured shorthold tenancy – no fault",
      "End of assured shorthold tenancy- tenant’s fault": "End of assured shorthold tenancy- tenant’s fault",
      "End of fixed term tenancy – no fault": "End of fixed term tenancy – no fault",
      "End of fixed term tenancy – tenant’s fault": "End of fixed term tenancy – tenant’s fault",
      "Repossession": "Repossession",
      "Under occupation - offered incentive to downsize": "Under occupation - offered incentive to downsize",
      "Under occupation - no incentive": "Under occupation - no incentive",
      "Property unsuitable because of ill health / disability": "Property unsuitable because of ill health / disability",
      "Property unsuitable because of poor condition": "Property unsuitable because of poor condition",
      "Couldn’t afford fees attached to renewing the tenancy": "Couldn’t afford fees attached to renewing the tenancy",
      "Couldn’t afford the increase in rent": "Couldn’t afford the increase in rent",
      "Couldn’t afford rent or mortgage – welfare reforms": "Couldn’t afford rent or mortgage – welfare reforms",
      "Couldn’t afford rent or mortgage – employment": "Couldn’t afford rent or mortgage – employment",
      "Couldn’t afford rent or mortgage – other": "Couldn’t afford rent or mortgage – other",
      "To move nearer to family / friends / school": "To move nearer to family / friends / school",
      "To move nearer to work": "To move nearer to work",
      "To move to accommodation with support": "To move to accommodation with support",
      "To move to independent accommodation": "To move to independent accommodation",
      "Hate crime": "Hate crime",
      "Other": "Other",
      "Don’t know": "Don’t know"
  }
%}

{%
  set subsidy_cap = {
    "Yes: Removal or spar bedroom subsidy": "Yes: Removal or spar bedroom subsidy",
    "Yes: Benefit cap": "Yes: Benefit cap",
    "Yes: both": "Yes: both",
    "No": "No",
    "Don't know": "Don't know"
  }
%}

{%
  set disability = {
    "Fully wheelchair accessible housing": "Fully wheelchair accessible housing",
    "Wheelchair access to essential rooms": "Wheelchair access to essential rooms",
    "Level access housing": "Level access housing",
    "Other disability requirements.": "Other disability requirements.",
    "No disability requirements": "No disability requirements",
    "Don’t know": "Don’t know"
  }
%}

{%
  set previous_situation = {
      "Owner occupation (private)": "Owner occupation (private)",
      "Owner occupation (low cost home ownership)": "Owner occupation (low cost home ownership)",
      "Private sector tenancy": "Private sector tenancy",
      "Tied housing or rented with job": "Tied housing or rented with job",
      "Supported housing": "Supported housing",
      "Sheltered accommodation": "Sheltered accommodation",
      "Residential care home": "Residential care home",
      "Living with friends or family": "Living with friends or family",
      "Refuge": "Refuge",
      "Hospital": "Hospital",
      "Prison / Approved Probation Hostel": "Prison / Approved Probation Hostel",
      "Direct access hostel": "Direct access hostel",
      "Bed and Breakfast": "Bed and Breakfast",
      "Mobile home / caravan": "Mobile home / caravan",
      "Any other temporary accommodation": "Any other temporary accommodation",
      "Home Office Asylum Support": "Home Office Asylum Support",
      "Children’s home / foster care": "Children’s home / foster care",
      "Rough sleeping": "Rough sleeping",
      "Fixed term Local Authority General Needs tenancy": "Fixed term Local Authority General Needs tenancy",
      "Lifetime Local Authority General Needs tenancy": "Lifetime Local Authority General Needs tenancy",
      "Fixed term PRP General Needs tenancy": "Fixed term PRP General Needs tenancy",
      "Lifetime PRP General Needs tenancy": "Lifetime PRP General Needs tenancy",
      "Other": "Other"
  }
%}

{% macro option(label, answers, data, group, onchange) %}
  {% set actual_answers = data_lookups[group] if data_lookups[group] else answers %}
  <label class="govuk-label govuk-label--m" for="{{ group }}">{{ label }}</label>
  <div class="govuk-form-group">
    <select class="govuk-select" id="{{ group }}" name="{{ group }}" onchange="{{ onchange }}">
      {% for value, name in actual_answers %}
      <option value="{{ value }}" {{ 'selected' if data[group] == value }}>{{ name }}</option>
      {% endfor %}
    </select>
  </div>
{% endmacro %}

{% macro radio(label, answers, data, group, changefn, subdued) %}
  {% set actual_answers = data_lookups[group] if data_lookups[group] else answers %}
  <label class="govuk-label {{ '' if subdued == true else 'govuk-label--m' }}" for="{{ group }}">{{ label }}</label>
  <div class="govuk-radios">
      {% for value, name in actual_answers %}
    <div class="govuk-radios__item">
      <input class="govuk-radios__input" id="{{ group }}-{{ value }}" name="{{ group }}" type="radio"
        onchange="{{ changefn }}" value="{{ value }}" {{ 'checked' if data[group] == value }} />
      <label class="govuk-label govuk-radios__label" for="{{ group }}-{{ value }}">
        {{ name }}
      </label>
    </div>
      {% endfor %}
  </div>
{% endmacro %}

{% macro checkboxes(label, hint, answers, data, group) %}
  {% set actual_answers = data_lookups[group] if data_lookups[group] else answers %}
      <div class="govuk-form-group" id="{{ group }}-section">
        <label class="govuk-label govuk-label--s">{{ label }}</label>
        <div id="{{ group }}-hint" class="govuk-hint">{{ hint }}</div>
        <div class="govuk-checkboxes">
          {% for value, name in actual_answers %}
          <div class="govuk-checkboxes__item">
            <input class="govuk-checkboxes__input" id="{{ group }}-{{value}}"
              name="{{ group }}" type="checkbox" 
              {{ 'checked' if data[group] and value in data[group] else '' }} 
              value="{{ value }}">
            <label class="govuk-label govuk-checkboxes__label" for="{{ group }}-{{value}}">{{ name }}</label>
          </div>
          {% endfor %}
        </div>
      </div>
{% endmacro %}